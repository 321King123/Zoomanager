


<br>
<button *ngIf="isAdmin() || isUser()" class="float-md-right md-primary pull-right btn btn-secondary" type="button"
        (click)="backClicked()">BACK
</button>

<br>
<br>
<br>

<div class="row no-gutters">
  <div class="col">
    <div class="card-block px-2">
      <h2 *ngIf="enclosureToView && enclosureToView.name!=null" class="info-title">
        Enclosure Name: {{enclosureToView.name}}
      </h2>
      <span *ngIf="enclosureToView &&enclosureToView.id!=null"
            class="badge badge-secondary">Id: {{enclosureToView.id}}</span>
    </div>
  </div>
  <div class="col-2">
    <img *ngIf="enclosureToView &&enclosureToView.picture!=null" src="{{enclosureToView.picture}}" class="img-fluid"
         alt="Picture of the Enclosure">
  </div>
</div>

<br>

<div>
  <h4 class="info-title">
    Description
  </h4>

  <div class="card">
    <div *ngIf="enclosureToView && enclosureToView.description!=null" class="card-body">
      {{enclosureToView.description}}
    </div>
    <div *ngIf="enclosureToView && (enclosureToView.description==null || enclosureToView.description=='')"
         class="card-body text-muted">
      Has no description.
    </div>
  </div>
</div>

<br>

<div>
  <h4 class="info-title">
    Public Information
  </h4>
  <div class="card">
    <div *ngIf="enclosureToView && enclosureToView.publicInfo!=null" class="card-body">
      {{enclosureToView.publicInfo}}
    </div>


    <div *ngIf="enclosureToView && (enclosureToView.publicInfo==null  || enclosureToView.publicInfo=='')"
         class="card-body text-muted">
      Has no public Information.
    </div>
  </div>
</div>
<br>

<div class="row no-gutters justify-content-end" *ngIf="editing===false && isAdmin()">
  <div class="btn-group col-2">
    <ng-container *ngIf="btnIsEdit">
      <button type="button" class="btn btn-info" (click)="editingOn()">Edit</button>
      <div class="btn-group" ngbDropdown role="group" aria-label="Button group with nested dropdown">
        <button class="btn btn-info dropdown-toggle-split" ngbDropdownToggle></button>
        <div class="dropdown-menu" ngbDropdownMenu>
          <button ngbDropdownItem (click)="toEditButton()">Edit</button>
          <button ngbDropdownItem (click)="toDeleteButton()">Delete</button>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="btnIsDelete">
      <button type="button" class="btn btn-danger" (click)="deleteEnclosure()">Delete</button>
      <div class="btn-group" ngbDropdown role="group" aria-label="Button group with nested dropdown">
        <button class="btn btn-danger dropdown-toggle-split" ngbDropdownToggle></button>
        <div class="dropdown-menu" ngbDropdownMenu>
          <button ngbDropdownItem (click)="toEditButton()">Edit</button>
          <button ngbDropdownItem (click)="toDeleteButton()">Delete</button>
        </div>
      </div>
    </ng-container>
  </div>

<!--  1 Button, dropdown Elements lead directly to deletion/Editing-->
<!--  <div class="btn-group col-2">-->
<!--    <ng-container *ngIf="btnIsEdit && isAdmin()">-->
<!--      <button type="button" class="btn btn-info" (click)="editingOn()">Edit</button>-->
<!--      <div class="btn-group" ngbDropdown role="group" aria-label="Button group with nested dropdown">-->
<!--        <button class="btn btn-info dropdown-toggle-split" ngbDropdownToggle></button>-->
<!--        <div class="dropdown-menu" ngbDropdownMenu>-->
<!--          <button ngbDropdownItem (click)="editingOn()">Edit</button>-->
<!--          <button ngbDropdownItem (click)="deleteEnclosure()">Delete</button>-->
<!--        </div>-->
<!--      </div>-->
<!--    </ng-container>-->
<!--  </div>-->

<!--  <button *ngIf="isAdmin() && editing===false" class="col-2 btn btn-info" type="button"-->
<!--          (click)="editingOn()">Edit Info-->
<!--  </button>-->
<!--  <div class="col-1"></div>-->
<!--  <button *ngIf="(isAdmin() || isUser()) && editing===false" class="col-2 btn btn-danger" type="button"-->
<!--          (click)="deleteEnclosure()">Delete enclosure-->
<!--  </button>-->
</div>



<!--<div *ngIf="isAdmin() && editing===false" class="row">-->
<!--  <div class="col">-->
<!--   <app-task-list-common (reloadTasks)="loadEnclosureTasks()" [janitors]="janitors" [employees]="employeesAssigned" [tasks]="tasks"></app-task-list-common>-->
<!--  </div>-->
<!--</div>-->


<ng-container class="Assigned Entities Component" *ngIf="isAdmin() && editing===false">
  <hr>
  <div class="row">
    <div class="col">
      <div class="btn-group" role="group" aria-label="Basic example">
        <button (click)="toAnimalMode()" *ngIf="this.enclosureToView!=null" type="button"
                class="btn btn-dark">Assigned Animals
        </button>
        <button (click)="toTaskMode()" type="button" class="btn btn-dark">Assigned Tasks</button>
      </div>
    </div>
  </div>

  <ng-container class="Animal List Mode " *ngIf="enclosureToView!=null  && animalMode">
    <div class="row">
      <div class="col-lg-12" *ngIf="assignedAnimals != null && assignedAnimals.length != 0">
        <app-animal-list (unassignAnimal)="unassignAnimal($event)" [enclosurePage]="true"
                         [animals]="assignedAnimals"></app-animal-list>
      </div>
    </div>
    <ng-container *ngIf="isAdmin()">
      <div class="row my-3">
        <div class="col-lg-12">
          <h5>Assign new Animal to Enclosure:</h5>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-lg-6">
          <div class="form-group">
            <select class="animal-select form-control" [(ngModel)]="selectedAnimal" name="selectedAnimal">
              <option disabled [ngValue]="null">Select animal to assign</option>
              <option *ngFor="let animal of animalList" [ngValue]="animal">{{animal.name}}; {{animal.species}}</option>
            </select>
          </div>

          <button type="button" (click)="assignAnimaltoEnclosure()" class="btn btn-success m-1 ">Assign</button>

        </div>
      </div>
    </ng-container>
  </ng-container>

  <ng-container class="Task List View" *ngIf="enclosureToView!=null && taskMode">
    <div class="row">
      <div class="col-lg-12">
        <app-task-list-common (reloadTasks)="loadEnclosureTasks()" [janitors]="janitors" [employees]="employeesAssigned" [tasks]="tasks"></app-task-list-common>
      </div>
    </div>

  </ng-container>

</ng-container>

<br>
<form *ngIf="isAdmin() && editing===true" class="form" [formGroup]="enclosureEditInfo" (ngSubmit)="saveChanges()">
  <div class="form-group col-12">
    <label for="inputName">Change Name</label>
    <input type="text" name="name" formControlName="name" class="form-control" id="inputName"
           aria-describedby="nameHelp" placeholder="Enter new name">

    <div *ngIf="submittedEnclosure && enclosureEditInfo.controls.name.errors" class="error">
      <small class="form-text text-warning" *ngIf="enclosureEditInfo.controls.name.errors.required">Name
        is
        required!
      </small>
    </div>
  </div>

  <div class="form-group col-12">
    <label for="inputDescription">Change Description</label>
    <textarea type="text" name="description" formControlName="description" class="form-control"
              id="inputDescription"
              aria-describedby="descriptionHelp" placeholder="Enter new description">{{this.enclosureToView.description}}</textarea>
    <div *ngIf="submittedEnclosure && enclosureEditInfo.controls.description.errors" class="error">
      <small class="form-text text-warning" *ngIf="enclosureEditInfo.controls.name.errors.required">Description
        is required!
      </small>
    </div>
  </div>

  <div class="form-group col-12">
    <label for="inputPublicInformation">Change Public information</label>
    <textarea type="text" name="publicInformation" formControlName="publicInformation" class="form-control"
              id="inputPublicInformation"
              aria-describedby="publicInformationHelp" placeholder="Enter new Public information"></textarea>
    <div *ngIf="submittedEnclosure && enclosureEditInfo.controls.publicInformation.errors" class="error">
      <small class="form-text text-warning" *ngIf="enclosureEditInfo.controls.species.errors.required">Public
        Information is not valid!
      </small>
    </div>
  </div>
  <div class="form-group col-lg-6 col-sm-12 mt-4">
    <div class="row">
      <div *ngIf="uploadedPicture" class="col">
        <img src={{uploadedPicture}} alt="" id="img"
             class="img-thumbnail w-70">
      </div>
      <div class="col">
        <input style="display: none" type="file" name="picture" accept=".png, .jpg, .jpeg"
               (change)="OnImageFileSelected($event);" formControlName="picture"
               id="newInputPicture" aria-describedby="pictureHelp" #imgUpload/>
        <button type="button" id="imgUploadBtn" class="btn btn-success" (click)="imgUpload.click()">Upload Image
        </button>
      </div>
    </div>
  </div>

  <button *ngIf="isAdmin() && editing===true" class="float-md-right pull-right btn btn-info" type="submit"
  >Save changes
  </button>
  <button *ngIf="isAdmin() && editing===true" class="float-md-right pull-right btn btn-outline-info" type="button"
          (click)="cancelChanges()">Cancel
  </button>
</form>





